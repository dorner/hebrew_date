<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: HebrewDateSupport::Parshiot
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../HebrewDateSupport.html" title="HebrewDateSupport (module)">HebrewDateSupport</a></span></span>
     &raquo; 
    <span class="title">Parshiot</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: HebrewDateSupport::Parshiot
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../HebrewDate.html" title="HebrewDate (class)">HebrewDate</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/support/parshiot.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parsha-instance_method" title="#parsha (instance method)">- (String) <strong>parsha</strong>(skip_extra = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns today&#39;s parsha(ios) or an empty string if there are none.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="parsha-instance_method">
  
    - (<tt>String</tt>) <strong>parsha</strong>(skip_extra = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns today&#39;s parsha(ios) or an empty string if there are none. names
such as Zachor or Hagadol.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>skip_extra</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if true, do not return “extra” Parsha</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/support/parshiot.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parsha'>parsha</span><span class='lparen'>(</span><span class='id identifier rubyid_skip_extra'>skip_extra</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='comment'># if today is not Shabbos, then there is no normal parsha reading
</span>  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span> <span class='op'>!=</span> <span class='int'>7</span>

  <span class='comment'># kvia= whether a Hebrew year is short/regular/long (0/1/2)
</span>  <span class='comment'># rosh_hashana= Rosh Hashana of this Hebrew year
</span>  <span class='comment'># rosh_hashana_day= day of week Rosh Hashana was on this year
</span>  <span class='comment'># week= current week in Hebrew calendar from Rosh Hashana
</span>  <span class='comment'># array= the correct index array for this Hebrew year
</span>  <span class='comment'># index= the index number of the parsha name
</span>  <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='comment'># create a clone of this date
</span>  <span class='id identifier rubyid_rosh_hashana'>rosh_hashana</span> <span class='op'>=</span> <span class='const'>HebrewDate</span><span class='period'>.</span><span class='id identifier rubyid_new_from_hebrew'>new_from_hebrew</span><span class='lparen'>(</span><span class='ivar'>@hebrew_year</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>

  <span class='comment'># get day Rosh Hashana was on
</span>  <span class='id identifier rubyid_rosh_hashana_day'>rosh_hashana_day</span> <span class='op'>=</span> <span class='id identifier rubyid_rosh_hashana'>rosh_hashana</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>

  <span class='comment'># week is the week since the first Shabbos on or after Rosh Hashana
</span>  <span class='id identifier rubyid_week'>week</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='ivar'>@abs_date</span> <span class='op'>-</span> <span class='id identifier rubyid_rosh_hashana'>rosh_hashana</span><span class='period'>.</span><span class='id identifier rubyid_abs_date'>abs_date</span><span class='rparen'>)</span> <span class='op'>-</span>
    <span class='lparen'>(</span><span class='int'>7</span> <span class='op'>-</span> <span class='id identifier rubyid_rosh_hashana_day'>rosh_hashana_day</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='float'>7.0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='comment'># get kvia
</span>  <span class='kw'>if</span> <span class='id identifier rubyid__cheshvan_long?'>_cheshvan_long?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid__kislev_short?'>_kislev_short?</span>
    <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>=</span> <span class='int'>2</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid__cheshvan_long?'>_cheshvan_long?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid__kislev_short?'>_kislev_short?</span>
    <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='comment'># determine appropriate array
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_hebrew_leap_year?'>hebrew_leap_year?</span>
    <span class='comment'># not leap year
</span>    <span class='kw'>case</span> <span class='id identifier rubyid_rosh_hashana_day'>rosh_hashana_day</span>
      <span class='kw'>when</span> <span class='int'>7</span> <span class='comment'># RH was on a Sat
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>SAT_SHORT_LEAP</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>SAT_SHORT_LEAP</span> <span class='op'>:</span> <span class='const'>SAT_LONG_LEAP</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='int'>2</span> <span class='comment'># RH was on a Mon
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>MON_SHORT_LEAP_ISRAEL</span> <span class='op'>:</span> <span class='const'>MON_SHORT_LEAP</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>MON_LONG_LEAP_ISRAEL</span> <span class='op'>:</span> <span class='const'>MON_LONG_LEAP</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='int'>3</span> <span class='comment'># RH was on a Tue
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>1</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>MON_LONG_LEAP_ISRAEL</span> <span class='op'>:</span> <span class='const'>MON_LONG_LEAP</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='int'>5</span> <span class='comment'># RH was on a Thu
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>THU_SHORT_LEAP</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>THU_LONG_LEAP</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_rosh_hashana_day'>rosh_hashana_day</span>
      <span class='kw'>when</span> <span class='int'>7</span> <span class='comment'># RH was on a Saturday
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>SAT_SHORT</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>SAT_LONG</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='int'>2</span> <span class='comment'># RH was on a Monday
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>MON_SHORT</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>MON_SHORT</span> <span class='op'>:</span> <span class='const'>MON_LONG</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='int'>3</span> <span class='comment'># RH was on a Tuesday
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>1</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>MON_SHORT</span> <span class='op'>:</span> <span class='const'>MON_LONG</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='int'>5</span> <span class='comment'># RH was on a Thursday
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>1</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='ivar'>@israeli</span> <span class='op'>?</span> <span class='const'>THU_NORMAL_ISRAEL</span> <span class='op'>:</span> <span class='const'>THU_NORMAL</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kvia'>kvia</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>THU_LONG</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># if something goes wrong
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Was not able to set the index array to any of the known types.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># get index from array
</span>  <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_array'>array</span><span class='lbracket'>[</span><span class='id identifier rubyid_week'>week</span><span class='rbracket'>]</span>

  <span class='comment'># If no Parsha this week
</span>  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>&lt;</span> <span class='int'>0</span>

  <span class='comment'># if parsha this week
</span>  <span class='id identifier rubyid_subindex'>subindex</span>     <span class='op'>=</span> <span class='ivar'>@ashkenaz</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_skip_extra'>skip_extra</span>
    <span class='id identifier rubyid_extra_parsha'>extra_parsha</span> <span class='op'>=</span> <span class='id identifier rubyid__extra_parsha'>_extra_parsha</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_extra_parsha'>extra_parsha</span>
      <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>PARSHA_NAMES</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_subindex'>subindex</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extra_parsha'>extra_parsha</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='const'>PARSHA_NAMES</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_subindex'>subindex</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jan 16 19:44:44 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-2.0.0).
</div>

  </body>
</html>